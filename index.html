<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quanzhou: Emporium of the World in Song-Yuan China</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        /* --- 1. Global Variables & Reset --- */
        :root {
            --primary-red: #c04838; /* Zayton Red */
            --warm-gold: #d4a024;   /* History Gold */
            --bg-paper: #f7f7f5;    /* Paper White */
            --text-dark: #2c3e50;
            --overlay-dark: rgba(0, 0, 0, 0.6);
            --success-green: #50a14f;
            --warning-yellow: #f1c40f;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: var(--bg-paper);
            color: var(--text-dark);
            line-height: 1.8;
            overflow-x: hidden;
        }

        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }

        /* --- 2. Navigation --- */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary-red); letter-spacing: 2px; }
        nav ul { display: flex; gap: 30px; }
        nav a { font-weight: 500; transition: color 0.3s; font-size: 0.95rem; }
        nav a:hover { color: var(--primary-red); }

        /* --- 3. Hero Section --- */
        .hero {
            height: 100vh;
            background: linear-gradient(var(--overlay-dark), var(--overlay-dark)), url('assets/hero_bg.jpg'); 
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            padding: 0 20px;
        }

        .hero h1 { font-size: 3.5rem; margin-bottom: 20px; text-shadow: 0 5px 15px rgba(0,0,0,0.5); font-weight: 700; }
        .hero p { font-size: 1.2rem; font-weight: 300; max-width: 800px; margin-bottom: 40px; }
        .hero-badge {
            background: var(--primary-red);
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .scroll-down { position: absolute; bottom: 40px; animation: bounce 2s infinite; cursor: pointer; font-size: 2rem; color: white; }

        /* --- 4. General Layout --- */
        section { padding: 80px 10%; }
        
        .section-header { text-align: center; margin-bottom: 50px; }
        .section-header h2 { font-size: 2.5rem; color: var(--primary-red); margin-bottom: 15px; }
        .section-header p { color: #666; font-size: 1.1rem; max-width: 600px; margin: 0 auto; }
        .divider { width: 60px; height: 3px; background: var(--warm-gold); margin: 20px auto 0; }

        /* --- 5. History Section --- */
        .timeline { margin-bottom: 40px; display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; }
        .timeline-item { position: relative; padding-left: 20px; border-left: 3px solid var(--warm-gold); }
        .year { font-weight: bold; color: var(--primary-red); display: block; }
        
        #map-container {
            width: 100%;
            height: 700px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
            position: relative;
        }

        /* --- 6. Religion Section --- */
        .culture-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }
        .culture-img { 
            width: 100%; height: 400px; 
            border-radius: 16px; object-fit: cover; 
            box-shadow: 10px 10px 0px var(--warm-gold);
        }
        #religion-chart { width: 100%; height: 400px; }

        /* --- 7. Economy Section --- */
        .economy-section {
            background: linear-gradient(rgba(255,255,255,0.95), rgba(255,255,255,0.95)), url('assets/economy_bg.jpg');
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
        }

        /* New: Entrepreneur Challenge Module Style */
        .entrepreneur-challenge {
            background: #fff5f4;
            border-radius: 16px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 10px 30px rgba(192, 72, 56, 0.08);
            border: 2px dashed var(--primary-red);
        }
        .challenge-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--warm-gold);
            padding-bottom: 15px;
        }
        .challenge-icon {
            font-size: 2.5rem;
            color: var(--primary-red);
        }
        .challenge-title {
            font-size: 1.4rem;
            color: var(--primary-red);
            font-weight: 700;
            margin: 0;
        }
        .challenge-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }
        .step-btn {
            flex: 1;
            min-width: 120px;
            background: white;
            border: 2px solid var(--primary-red);
            border-radius: 8px;
            padding: 12px 15px;
            font-weight: 600;
            color: var(--primary-red);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .step-btn:hover {
            background: var(--primary-red);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(192, 72, 56, 0.2);
        }
        .step-btn.active {
            background: var(--primary-red);
            color: white;
        }
        .challenge-content {
            background: white;
            border-radius: 12px;
            padding: 25px;
            min-height: 180px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .challenge-question {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-dark);
            font-size: 1.1rem;
        }
        .option-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .option-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }
        .option-btn:hover {
            background: #f0f0f0;
            border-color: var(--warm-gold);
        }
        .option-btn.correct {
            background: rgba(80, 161, 79, 0.1);
            border-color: var(--success-green);
            color: var(--success-green);
        }
        .option-btn.wrong {
            background: rgba(192, 72, 56, 0.1);
            border-color: var(--primary-red);
            color: var(--primary-red);
        }
        .result-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        .feedback-success {
            background: rgba(80, 161, 79, 0.1);
            border-left: 4px solid var(--success-green);
            color: var(--success-green);
        }
        .feedback-fail {
            background: rgba(192, 72, 56, 0.1);
            border-left: 4px solid var(--primary-red);
            color: var(--primary-red);
        }
        .challenge-progress {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            align-items: center;
        }
        .progress-bar {
            flex: 1;
            height: 8px;
            background: #eee;
            border-radius: 4px;
            margin: 0 15px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--warm-gold);
            width: 0%;
            transition: width 0.5s;
        }
        .next-btn {
            background: var(--warm-gold);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
        }
        .next-btn:hover {
            background: #b58c1e;
            transform: translateY(-2px);
        }
        .final-result {
            text-align: center;
            padding: 20px;
            display: none;
        }
        .final-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            color: var(--warm-gold);
        }
        .final-title {
            font-size: 1.8rem;
            color: var(--primary-red);
            margin-bottom: 10px;
            font-weight: 700;
        }
        .final-desc {
            color: #666;
            margin-bottom: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .restart-btn {
            background: var(--primary-red);
            color: white;
            border: none;
            padding: 12px 35px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
        }
        .restart-btn:hover {
            background: #a63626;
            transform: translateY(-2px);
        }

        /* --- 8. Sounds Section --- */
        .sound-intro {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            margin-bottom: 40px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }
        .sound-intro h3 {
            color: var(--primary-red);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        .sound-intro p {
            color: #555;
            margin-bottom: 15px;
            text-align: justify;
        }
        .sound-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; margin-bottom: 60px; }
        .sound-card {
            background: white; padding: 30px; border-radius: 16px; text-align: center; cursor: pointer;
            transition: all 0.3s; border: 2px solid transparent; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .sound-card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(192, 72, 56, 0.15); }
        .sound-card.playing { border-color: var(--primary-red); background: #fff5f4; }
        .card-icon { font-size: 3rem; margin-bottom: 15px; }
        .card-label { font-weight: bold; font-size: 1.2rem; margin-bottom: 5px; }
        .visualizer { display: flex; justify-content: center; gap: 4px; height: 20px; align-items: flex-end; margin-top: 15px; opacity: 0; transition: opacity 0.3s; }
        .sound-card.playing .visualizer { opacity: 1; }
        .bar { width: 4px; background: var(--primary-red); border-radius: 2px; animation: equalize 1s infinite; }
        .bar:nth-child(1) { animation-delay: 0.1s; height: 10px; } .bar:nth-child(2) { animation-delay: 0.2s; height: 15px; } .bar:nth-child(3) { animation-delay: 0.3s; height: 8px; }
        
        #sound-chart-container {
            width: 100%;
            height: 400px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            padding: 20px;
            margin-top: 20px;
        }

        /* --- 9. Food Section --- */
        .food-section {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('assets/food_bg.jpg');
            background-size: cover;
            background-position: center;
            color: white;
        }
        .food-container { display: flex; gap: 40px; flex-wrap: wrap; justify-content: center; max-width: 1200px; margin: 0 auto; }
        
        .food-item { background: rgba(255,255,255,0.95); display: flex; align-items: center; padding: 15px; border-radius: 12px; transition: transform 0.3s; color: var(--text-dark); }
        .food-item img { width: 100px; height: 100px; object-fit: cover; border-radius: 8px; margin-right: 20px; }
        
        .food-widget {
            background: rgba(255, 255, 255, 0.95); max-width: 450px; padding: 40px; border-radius: 20px;
            text-align: center; color: var(--text-dark); flex: 1; min-width: 300px; height: fit-content; align-self: center;
        }
        .result-window {
            background: #fdf6e3; height: 150px; border-radius: 12px; border: 3px solid var(--primary-red);
            display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 30px 0;
        }
        .food-name { font-size: 2.2rem; color: var(--primary-red); font-weight: 800; transition: 0.1s; }
        .food-name.blur { filter: blur(4px); }
        .spin-btn {
            background: var(--primary-red); color: white; border: none; padding: 15px 50px; font-size: 1.2rem; width: 100%;
            border-radius: 50px; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 20px rgba(192, 72, 56, 0.3);
        }
        .spin-btn:hover { background: #a63626; transform: translateY(-2px); }
        .spin-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }

        /* --- Footer --- */
        footer { background: #333; color: white; text-align: center; padding: 60px 10%; }

        /* Animations */
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-20px);} 60% {transform: translateY(-10px);} }
        @keyframes equalize { 0% {height: 5px;} 50% {height: 100%;} 100% {height: 5px;} }
        @keyframes fadeIn { from {opacity: 0; transform: translateY(10px);} to {opacity: 1; transform: translateY(0);} }
        .fade-in { animation: fadeIn 0.5s ease forwards; }

        @media (max-width: 900px) {
            .culture-layout, .food-container, .grid-template-columns { grid-template-columns: 1fr; display: block; }
            .hero h1 { font-size: 2.5rem; }
            section { padding: 60px 5%; }
            #map-container { height: 400px; }
            .food-item { margin-bottom: 20px; }
            .food-widget { margin-top: 30px; }
            #sound-chart-container { height: 300px; }
            .option-grid { grid-template-columns: 1fr; }
            .challenge-steps { flex-direction: column; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">QUANZHOU | ZAYTON</div>
        <nav>
            <ul>
                <li><a href="#history">History</a></li>
                <li><a href="#religion">Spirit</a></li>
                <li><a href="#economy">Economy</a></li>
                <li><a href="#culture">Sounds</a></li>
                <li><a href="#food">Taste</a></li>
            </ul>
        </nav>
    </header>

    <div class="hero">
        <div class="hero-badge">UNESCO World Heritage</div>
        <h1>Half Earthly Smoke, Half Divine Spirit</h1>
        <p>"Amidst the rising tides, merchants from ten thousand nations gather."<br>Quanzhou: Emporium of the World in Song-Yuan China</p>
        <div class="scroll-down" onclick="document.getElementById('history').scrollIntoView({behavior: 'smooth'})">‚Üì</div>
    </div>

    <section id="history">
        <div class="section-header">
            <h2>Legacy of Zayton</h2>
            <p>Exploring 22 Heritage Sites of the Maritime Silk Road</p>
            <div class="divider"></div>
        </div>
        
        <div class="timeline">
            <div class="timeline-item"><span class="year">1087 (Song Dynasty)</span>Shibosi (Customs) Established</div>
            <div class="timeline-item"><span class="year">1271 (Yuan Dynasty)</span>Marco Polo Visits Zayton</div>
            <div class="timeline-item"><span class="year">2021 (Modern Era)</span>UNESCO Listing</div>
        </div>

        <div id="map-container"></div>
    </section>

    <section id="religion">
        <div class="section-header">
            <h2>City of Gods</h2>
            <p>World Museum of Religions: Where Gods are Neighbors</p>
            <div class="divider"></div>
        </div>
        <div class="culture-layout">
            <div>
                <img src="assets/culture_img.jpg" alt="Quanzhou Religious Architecture" class="culture-img">
                <p style="margin-top: 15px; color: #666; font-size: 0.9rem; font-style: italic;">
                    * At Tumen Street, the Confucius Temple and Qingjing Mosque stand only meters apart, witnessing a millennium of harmony.
                </p>
            </div>
            <div id="religion-chart"></div>
        </div>
    </section>

    <section id="economy" class="economy-section">
        <div class="section-header">
            <h2>To Win, You Must Dare</h2>
            <p>From Zayton to Lion City: A Shared Spirit of Prosperity</p>
            <div class="divider"></div>
        </div>

        <div style="background: rgba(255, 255, 255, 0.95); padding: 40px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center;">
            
            <div style="text-align: left;">
                <h3 style="color: var(--primary-red); margin-bottom: 20px; font-size: 1.5rem;">ü¶Å The Hokkien Spirit in Singapore</h3>
                <p style="margin-bottom: 15px; text-align: justify; color: #555;">
                    There is a saying in Quanzhou: <strong>"Three parts destiny, seven parts hard work."</strong> This daring oceanic spirit not only built Quanzhou but also sailed across the seas to take root in <strong>Singapore</strong>.
                </p>
                <p style="margin-bottom: 15px; text-align: justify; color: #555;">
                    As a major ancestral home for Singaporean Chinese, Quanzhou has produced visionaries like <strong>Lee Kong Chian</strong> (The Rubber Tycoon). From early rubber trading to modern finance, the Hokkien business network bridges China and Nanyang.
                </p>
                <div style="background: #fff5f4; border-left: 4px solid var(--primary-red); padding: 15px; margin-top: 20px;">
                    <p style="margin: 0; font-size: 0.9rem; color: #333; font-style: italic;">
                        "Whether on Shenton Way or by the Jinjiang River, the song 'Ai Pia Cia E Yia' (To Win, You Must Dare) remains our shared anthem."
                    </p>
                </div>
            </div>

            <div id="economy-chart" style="width: 100%; height: 400px;"></div>
        </div>

        <!-- New: Entrepreneur Challenge Module -->
        <div class="entrepreneur-challenge">
            <div class="challenge-header">
                <div class="challenge-icon">üö¢</div>
                <h3 class="challenge-title">Hokkien Entrepreneur Challenge | ÈóΩÂçóÂàõ‰∏öÊåëÊàò</h3>
            </div>
            
            <div class="challenge-steps">
                <div class="step-btn active" data-step="1">Step 1: Choose Industry</div>
                <div class="step-btn" data-step="2">Step 2: Overcome Challenges</div>
                <div class="step-btn" data-step="3">Step 3: Expand Markets</div>
                <div class="step-btn" data-step="4">Step 4: Inherit Spirit</div>
            </div>
            
            <div class="challenge-content">
                <!-- Step 1 Content -->
                <div class="step-content" id="step-1">
                    <div class="challenge-question">As a Song Dynasty Quanzhou merchant, which industry will you choose to start a business? (Embodying the spirit of "To Win, You Must Dare")</div>
                    <div class="option-grid">
                        <div class="option-btn" data-correct="false">Silk Trade (Low risk, stable profits)</div>
                        <div class="option-btn" data-correct="true">Ocean Shipping (High risk, huge profits)</div>
                        <div class="option-btn" data-correct="false">Tea Processing (Local market, low competition)</div>
                        <div class="option-btn" data-correct="false">Porcelain Firing (Complex craftsmanship, long cycle)</div>
                    </div>
                    <div class="result-feedback feedback-success">
                        <strong>Correct Choice!</strong> Quanzhou merchants were renowned for their courage and adventurous spirit. Although ocean shipping was high-risk, it directly connected the Nanyang and Middle Eastern markets, perfectly embodying the spirit of "To Win, You Must Dare." Historically, Quanzhou merchants monopolized maritime trade through this adventurous spirit.
                    </div>
                    <div class="result-feedback feedback-fail">
                        <strong>Admirable courage, but not "daring" enough!</strong> The secret to Quanzhou merchants' success lies in their willingness to take on high-risk, high-reward ventures. Although ocean shipping was full of uncertainties, it was this adventurous spirit that made Quanzhou the "No.1 Port in the East."
                    </div>
                </div>
                
                <!-- Step 2 Content -->
                <div class="step-content" id="step-2" style="display: none;">
                    <div class="challenge-question">Your fleet encounters a typhoon, some goods are damaged, and funds are tight. How will you respond?</div>
                    <div class="option-grid">
                        <div class="option-btn" data-correct="false">Abandon ocean trade and switch to local business</div>
                        <div class="option-btn" data-correct="false">Borrow money from the government and wait for compensation</div>
                        <div class="option-btn" data-correct="true">Pool funds with other merchants to reorganize the fleet</div>
                        <div class="option-btn" data-correct="false">Reduce product quality to make up for losses</div>
                    </div>
                    <div class="result-feedback feedback-success">
                        <strong>Demonstrating the Hokkien merchants' spirit of unity!</strong> "Unity and collaboration to overcome difficulties" is an important trait of the Quanzhou merchant group. Historically, Quanzhou merchants supported each other through clan and chamber of commerce networks, forming powerful business alliances‚Äîthis was also the key to their long-term success in maritime trade.
                    </div>
                    <div class="result-feedback feedback-fail">
                        <strong>Lacking resilience and collaborative spirit!</strong> Quanzhou merchants never gave up easily in the face of difficulties. They were skilled at uniting through clan and chamber of commerce networks to share risks and benefits together. This "group development" model is the core of Hokkien business culture.
                    </div>
                </div>
                
                <!-- Step 3 Content -->
                <div class="step-content" id="step-3" style="display: none;">
                    <div class="challenge-question">Your business has gradually stabilized, and you want to expand into overseas markets. Where will you choose?</div>
                    <div class="option-grid">
                        <div class="option-btn" data-correct="false">Japan (Close distance, cultural similarities)</div>
                        <div class="option-btn" data-correct="false">Vietnam (Land accessible, convenient transportation)</div>
                        <div class="option-btn" data-correct="true">Persia (Long distance, high profits)</div>
                        <div class="option-btn" data-correct="false">Philippines (Many islands, high risk)</div>
                    </div>
                    <div class="result-feedback feedback-success">
                        <strong>Global vision!</strong> Historically, Quanzhou merchants' trade networks extended as far as Persia and Arabia, forming a Maritime Silk Road spanning Asia and Africa. This courage to explore distant markets is the highest embodiment of the "To Win, You Must Dare" spirit.
                    </div>
                    <div class="result-feedback feedback-fail">
                        <strong>Not broad-minded enough!</strong> The reason Quanzhou became the "World's No.1 Port in the East" is precisely because Quanzhou merchants were not satisfied with neighboring markets and dared to sail to distant regions like Persia and Arabia. This pioneering spirit made Quanzhou an important hub of global trade in the Middle Ages.
                    </div>
                </div>
                
                <!-- Step 4 Content -->
                <div class="step-content" id="step-4" style="display: none;">
                    <div class="challenge-question">Your business empire has been established. How will you inherit the Hokkien business spirit?</div>
                    <div class="option-grid">
                        <div class="option-btn" data-correct="false">Leave all wealth to future generations</div>
                        <div class="option-btn" data-correct="true">Found a chamber of commerce to support fellow townsmen in starting businesses</div>
                        <div class="option-btn" data-correct="false">Donate to officials for fame and enter officialdom</div>
                        <div class="option-btn" data-correct="false">Indulge in pleasure and spend your later years in comfort</div>
                    </div>
                    <div class="result-feedback feedback-success">
                        <strong>Truly understanding the Hokkien business philosophy!</strong> "To achieve success and help the world" is a fine tradition of Quanzhou merchants. Historically, Quanzhou-born merchants like Li Gongzang and Li Guangqian actively founded chambers of commerce, schools, and charitable institutions to support fellow townsmen and give back to society. This spirit of "balancing profit and righteousness" has made the influence of the Hokkien merchant group span thousands of years.
                    </div>
                    <div class="result-feedback feedback-fail">
                        <strong>Failed to comprehend the essence of business philosophy!</strong> The inheritance of the Hokkien merchant group is not only the transfer of wealth but also the continuation of spirit. Quanzhou merchants have always valued clan mutual assistance and fellow townsman support, passing on the business spirit from generation to generation through founding chambers of commerce and schools. This "mentorship and support" culture is the fundamental reason for the long-term development of the merchant group.
                    </div>
                </div>
                
                <!-- Final Result -->
                <div class="final-result" id="final-result">
                    <div class="final-icon">üèÜ</div>
                    <h3 class="final-title">Congratulations! You've become a successful Hokkien merchant!</h3>
                    <p class="final-desc">You have demonstrated the core spirit of "To Win, You Must Dare", the team awareness of unity and collaboration, the global vision of pioneering and forging ahead, and the business ethics of balancing profit and righteousness. These qualities are the secrets of Quanzhou merchants' success in the business world for thousands of years, and also the reason why the Hokkien spirit has transcended time and remained vibrant from Zayton to Singapore.</p>
                    <button class="restart-btn" onclick="restartChallenge()">Restart Challenge</button>
                </div>
            </div>
            
            <div class="challenge-progress">
                <span class="progress-text">Progress: 0/4</span>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <button class="next-btn" onclick="nextStep()">Next Step</button>
            </div>
        </div>
    </section>

    <section id="culture" style="background: white;">
        <div class="section-header">
            <h2>Sounds of Quanzhou</h2>
            <p>Click icons to listen to the frequency of the ancient city</p>
            <div class="divider"></div>
        </div>

        <!-- Text Introduction -->
        <div class="sound-intro">
            <h3>üé∂ The Sonic Tapestry of a Maritime Metropolis</h3>
            <p>Quanzhou's soundscape is a living archive of its maritime history and cultural fusion. For centuries, the city's streets, ports, and temples have resonated with a unique symphony that blends indigenous traditions with foreign influences.</p>
            <p>Nanyin, the "living fossil" of Chinese music, carries the melodic traditions of the Song and Yuan dynasties, while the rhythmic patterns of folk activities reflect the city's vibrant social life. The crashing waves of Chongwu Coast and the lively sounds of local markets further enrich this acoustic landscape, creating an auditory journey through time.</p>
            <p>Below is a comprehensive analysis of Quanzhou's core sound cultures, evaluating four key categories across five dimensions: historical inheritance, artistic value, folk relevance, audience reach, and living transmission. Each sound type tells a unique story of the city's soul.</p>
        </div>

        <div class="sound-grid">
            <div class="sound-card" onclick="playSound('audio-nanyin', this)">
                <div class="card-icon">üé∏</div>
                <div class="card-label">Nanyin Music</div>
                <div class="visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                <audio id="audio-nanyin" src="assets/nanyin_sample.mp3"></audio>
            </div>
            <div class="sound-card" onclick="playSound('audio-dialect', this)">
                <div class="card-icon">üó£Ô∏è</div>
                <div class="card-label">Hokkien Dialect</div>
                <div class="visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                <audio id="audio-dialect" src="assets/minnan_dialect.mp3">
            </div>
            <div class="sound-card" onclick="playSound('audio-dice', this)">
                <div class="card-icon">üé≤</div>
                <div class="card-label">Mooncake Dice</div>
                <div class="visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                <audio id="audio-dice" src="assets/dice_roll.mp3">
            </div>
            <div class="sound-card" onclick="playSound('audio-ocean', this)">
                <div class="card-icon">üåä</div>
                <div class="card-label">Waves of Chongwu</div>
                <div class="visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                <audio id="audio-ocean" src="assets/ocean_wave.mp3">
            </div>
        </div>

        <!-- Quanzhou Traditional Sound Culture Radar Chart -->
        <div id="sound-chart-container"></div>
    </section>

    <section id="food" class="food-section">
        <div class="section-header">
            <h2 style="color: white;">Nostalgic Flavors</h2>
            <p style="color: rgba(255,255,255,0.9)">The Taste of Home for Wanderers</p>
            <div class="divider" style="background: white;"></div>
        </div>

        <div class="food-container">
            
            <div class="food-gallery" style="flex: 1; min-width: 300px; display: grid; gap: 20px;">
                
                <div class="food-item">
                    <img src="assets/food_mianxian.jpg" alt="Mian Xian">
                    <div style="text-align: left;">
                        <h4 style="color: var(--primary-red); margin-bottom: 5px; font-size: 1.1rem;">Mianxian Paste</h4>
                        <p style="font-size: 0.9rem; color: #555; margin: 0;">The soul of breakfast. Silky rice noodles in a seafood broth. A taste deeply missed by overseas Chinese.</p>
                    </div>
                </div>

                <div class="food-item">
                    <img src="assets/food_tusundong.jpg" alt="Sandworm Jelly">
                    <div style="text-align: left;">
                        <h4 style="color: var(--primary-red); margin-bottom: 5px; font-size: 1.1rem;">Sandworm Jelly</h4>
                        <p style="font-size: 0.9rem; color: #555; margin: 0;">"Food for the brave." Crystal clear jelly rich in collagen, served with garlic and vinegar. The taste of the ocean.</p>
                    </div>
                </div>

                <div class="food-item">
                    <img src="assets/food_jiangmuya.jpg" alt="Ginger Duck">
                    <div style="text-align: left;">
                        <h4 style="color: var(--primary-red); margin-bottom: 5px; font-size: 1.1rem;">Ginger Duck Stew</h4>
                        <p style="font-size: 0.9rem; color: #555; margin: 0;">Old ginger and duck stewed in a clay pot. A warming, aromatic dish perfect for winter nourishment.</p>
                    </div>
                </div>

            </div>

            <div class="food-widget">
                <h3 style="color: var(--text-dark); margin-bottom: 10px;">What to eat?</h3>
                <p style="color: #666; font-size: 0.9rem; margin-bottom: 30px;">Can't decide? Let Destiny choose.</p>
                
                <div class="result-window">
                    <div id="food-display">
                        <div class="food-name">‚ùì</div>
                        <div class="food-desc" style="color: #666; margin-top: 5px;">Click to spin</div>
                    </div>
                </div>
                
                <button class="spin-btn" onclick="startLottery()" id="start-btn">Spin for Food</button>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Quanzhou Digital Project. Designed by Gemini.</p>
    </footer>

    <script>
        // Initialize Everything
        window.onload = function() {
            initHeritageChart();
            initReligionChart();
            initEconomyChart();
            initSoundChart(); // Sound chart initialization
            initChallenge(); // Initialize entrepreneur challenge module
            
            // Auto resize charts on window resize
            window.addEventListener('resize', () => {
                echarts.getInstanceByDom(document.getElementById('map-container')).resize();
                echarts.getInstanceByDom(document.getElementById('religion-chart')).resize();
                echarts.getInstanceByDom(document.getElementById('economy-chart')).resize();
                echarts.getInstanceByDom(document.getElementById('sound-chart-container')).resize();
            });
        };

        // --- 1. Heritage Site Bubble Chart ---
        function initHeritageChart() {
            const chartDom = document.getElementById('map-container');
            const myChart = echarts.init(chartDom);
            
            const heritageSites = [
                { name: "Jiuri Mountain", age: 850, significance: 80, category: "Admin/Mgmt" },
                { name: "Maritime Trade Office", age: 930, significance: 95, category: "Admin/Mgmt" },
                { name: "Deji Gate Site", age: 780, significance: 85, category: "Admin/Mgmt" },
                { name: "Tianhou Temple", age: 1050, significance: 90, category: "Religious" },
                { name: "Zhenwu Temple", age: 820, significance: 75, category: "Religious" },
                { name: "Southern Clan Office", age: 720, significance: 65, category: "Admin/Mgmt" },
                { name: "Confucius Temple", age: 980, significance: 85, category: "Cultural/Edu" },
                { name: "Kaiyuan Temple", age: 1300, significance: 95, category: "Religious" },
                { name: "Lao Tze Statue", age: 700, significance: 60, category: "Religious" },
                { name: "Qingjing Mosque", age: 900, significance: 90, category: "Religious" },
                { name: "Islamic Tombs", age: 880, significance: 75, category: "Religious" },
                { name: "Statue of Mani", age: 950, significance: 80, category: "Religious" },
                { name: "Cizao Kilns", age: 800, significance: 85, category: "Trade/Production" },
                { name: "Dehua Kilns", age: 920, significance: 90, category: "Trade/Production" },
                { name: "Xiacaopu Iron Site", age: 830, significance: 70, category: "Trade/Production" },
                { name: "Luoyang Bridge", age: 950, significance: 90, category: "Transport" },
                { name: "Anping Bridge", age: 800, significance: 85, category: "Transport" },
                { name: "Shunji Bridge", age: 750, significance: 70, category: "Transport" },
                { name: "Estuary Docks", age: 820, significance: 80, category: "Transport" },
                { name: "Shihu Dock", age: 780, significance: 75, category: "Transport" },
                { name: "Liusheng Pagoda", age: 850, significance: 80, category: "Transport" },
                { name: "Wanshou Pagoda", age: 830, significance: 75, category: "Transport" }
            ];

            const categories = ["Religious", "Transport", "Admin/Mgmt", "Trade/Production", "Cultural/Edu"];
            const colors = { 
                "Religious": "#c04838", 
                "Transport": "#4a90e2", 
                "Admin/Mgmt": "#d4a024", 
                "Trade/Production": "#50a14f", 
                "Cultural/Edu": "#8e44ad" 
            };

            const seriesData = categories.map(cat => ({
                name: cat,
                type: 'scatter',
                symbolSize: function(data) {
                    return data[2] / 5;
                },
                itemStyle: {
                    color: colors[cat],
                    shadowBlur: 10,
                    shadowColor: colors[cat]
                },
                emphasis: {
                    scale: true
                },
                data: heritageSites
                    .filter(i => i.category === cat)
                    .map(i => [i.age, i.significance, i.significance, i.name])
            }));

            const option = {
                backgroundColor: 'transparent',
                title: {
                    text: 'Quanzhou Heritage Sites',
                    subtext: 'Age (years) vs. Historical Significance',
                    left: 'center',
                    textStyle: {
                        color: '#333',
                        fontSize: 18
                    },
                    subtextStyle: {
                        color: '#666'
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        return `<div style="font-weight:bold">${params.data[3]}</div>
                                <div>Age: ${params.data[0]} years</div>
                                <div>Significance: ${params.data[1]}/100</div>
                                <div style="font-size:12px;color:#aaa">${params.seriesName}</div>`;
                    },
                    backgroundColor: 'rgba(50,50,50,0.8)',
                    textStyle: { color: '#fff' }
                },
                legend: {
                    bottom: 20,
                    icon: 'circle',
                    textStyle: { color: '#333' },
                    backgroundColor: 'rgba(255,255,255,0.8)',
                    borderRadius: 20,
                    padding: 10,
                    data: categories
                },
                grid: {
                    left: '8%',
                    right: '8%',
                    bottom: '15%',
                    top: '15%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    name: 'Age (years)',
                    nameLocation: 'middle',
                    nameGap: 30,
                    axisLine: {
                        lineStyle: {
                            color: '#999'
                        }
                    },
                    splitLine: {
                        lineStyle: {
                            type: 'dashed',
                            color: '#eee'
                        }
                    }
                },
                yAxis: {
                    type: 'value',
                    name: 'Historical Significance',
                    nameLocation: 'middle',
                    nameGap: 50,
                    max: 100,
                    axisLine: {
                        lineStyle: {
                            color: '#999'
                        }
                    },
                    splitLine: {
                        lineStyle: {
                            type: 'dashed',
                            color: '#eee'
                        }
                    }
                },
                series: seriesData
            };

            myChart.setOption(option);
        }

        // --- 2. Religion Rose Chart ---
        function initReligionChart() {
            const chart = echarts.init(document.getElementById('religion-chart'));
            
            const option = {
                title: {
                    text: 'Diversity of Faiths',
                    left: 'center',
                    top: 10,
                    textStyle: { color: '#c04838', fontSize: 16 }
                },
                tooltip: { trigger: 'item', formatter: '{b} : {d}%' },
                series: [
                    {
                        name: 'Faith Distribution',
                        type: 'pie',
                        radius: [20, 140],
                        center: ['50%', '55%'],
                        roseType: 'area',
                        itemStyle: { borderRadius: 8 },
                        data: [
                            { value: 40, name: 'Folk Beliefs (Mazu)', itemStyle: { color: '#c04838' } },
                            { value: 30, name: 'Buddhism', itemStyle: { color: '#d4a024' } },
                            { value: 20, name: 'Islam', itemStyle: { color: '#27ae60' } },
                            { value: 15, name: 'Taoism', itemStyle: { color: '#2980b9' } },
                            { value: 10, name: 'Christianity', itemStyle: { color: '#8e44ad' } },
                            { value: 5, name: 'Manichaeism', itemStyle: { color: '#e67e22' } }
                        ]
                    }
                ]
            };
            chart.setOption(option);
        }

        // --- 3. Economy Chart ---
        function initEconomyChart() {
            const chart = echarts.init(document.getElementById('economy-chart'));
            
            const option = {
                title: { 
                    text: 'Maritime Trade Growth Index', 
                    subtext: 'Historical Trend',
                    left: 'left',
                    textStyle: { color: '#c04838', fontSize: 16, fontWeight: 'bold' }
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: { type: 'line' }
                },
                grid: {
                    left: '3%', right: '4%', bottom: '3%', top: '20%',
                    containLabel: true
                },
                xAxis: [
                    {
                        type: 'category',
                        boundaryGap: false,
                        data: ['Song/Yuan', 'Ming/Qing', 'Modern', 'Present', 'Future'],
                        axisLine: { lineStyle: { color: '#999' } }
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        splitLine: { lineStyle: { type: 'dashed', color: '#eee' } }
                    }
                ],
                series: [
                    {
                        name: 'Trade Volume',
                        type: 'line',
                        smooth: true,
                        lineStyle: { width: 0 },
                        showSymbol: false,
                        areaStyle: {
                            opacity: 0.8,
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgb(192, 72, 56)' },
                                { offset: 1, color: 'rgb(255, 191, 160)' }
                            ])
                        },
                        data: [20, 35, 30, 60, 90, 120]
                    }
                ]
            };
            chart.setOption(option);
        }

        // --- 4. Quanzhou Traditional Sound Culture Radar Chart ---
        function initSoundChart() {
            const chart = echarts.init(document.getElementById('sound-chart-container'));
            
            const option = {
                title: {
                    text: 'Quanzhou Traditional Sound Culture',
                    subtext: 'Multi-dimensional Evaluation of Core Sound Types',
                    left: 'center',
                    textStyle: {
                        color: '#333',
                        fontSize: 16,
                        fontWeight: 'bold'
                    },
                    subtextStyle: {
                        color: '#666',
                        fontSize: 12
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        return `<div style="font-weight:bold">${params.seriesName}</div>
                                <div>${params.name}: ${params.value}/100</div>`;
                    },
                    backgroundColor: 'rgba(50,50,50,0.8)',
                    textStyle: { color: '#fff' }
                },
                legend: {
                    bottom: 10,
                    textStyle: { color: '#333', fontSize: 14 },
                    data: ['Nanyin Music', 'Folk Activities', 'Natural Sounds', 'Market Sounds']
                },
                radar: {
                    indicator: [
                        { name: 'Historical Inheritance', max: 100 },
                        { name: 'Artistic Value', max: 100 },
                        { name: 'Folk Relevance', max: 100 },
                        { name: 'Audience Reach', max: 100 },
                        { name: 'Living Transmission', max: 100 }
                    ],
                    shape: 'polygon',
                    splitNumber: 5,
                    axisName: {
                        color: '#333',
                        fontSize: 12,
                        fontWeight: '500'
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(0,0,0,0.15)'
                        }
                    },
                    splitArea: {
                        areaStyle: {
                            color: ['rgba(247,247,245,0.6)', 'rgba(255,255,255,0.6)']
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#999',
                            width: 1.5
                        }
                    }
                },
                series: [
                    {
                        name: 'Nanyin Music',
                        type: 'radar',
                        data: [[95, 98, 75, 60, 85]],
                        lineStyle: {
                            color: '#c04838',
                            width: 3
                        },
                        itemStyle: {
                            color: 'rgba(192, 72, 56, 0.7)'
                        },
                        areaStyle: {
                            color: 'rgba(192, 72, 56, 0.2)'
                        },
                        symbol: 'circle',
                        symbolSize: 6
                    },
                    {
                        name: 'Folk Activities',
                        type: 'radar',
                        data: [[80, 75, 95, 85, 90]],
                        lineStyle: {
                            color: '#d4a024',
                            width: 3
                        },
                        itemStyle: {
                            color: 'rgba(212, 160, 36, 0.7)'
                        },
                        areaStyle: {
                            color: 'rgba(212, 160, 36, 0.2)'
                        },
                        symbol: 'circle',
                        symbolSize: 6
                    },
                    {
                        name: 'Natural Sounds',
                        type: 'radar',
                        data: [[90, 85, 80, 95, 100]],
                        lineStyle: {
                            color: '#4a90e2',
                            width: 3
                        },
                        itemStyle: {
                            color: 'rgba(74, 144, 226, 0.7)'
                        },
                        areaStyle: {
                            color: 'rgba(74, 144, 226, 0.2)'
                        },
                        symbol: 'circle',
                        symbolSize: 6
                    },
                    {
                        name: 'Market Sounds',
                        type: 'radar',
                        data: [[65, 70, 98, 95, 92]],
                        lineStyle: {
                            color: '#50a14f',
                            width: 3
                        },
                        itemStyle: {
                            color: 'rgba(80, 161, 79, 0.7)'
                        },
                        areaStyle: {
                            color: 'rgba(80, 161, 79, 0.2)'
                        },
                        symbol: 'circle',
                        symbolSize: 6
                    }
                ]
            };
            
            chart.setOption(option);
        }

        // --- 5. Audio Playback Logic ---
        let currentAudio = null, currentCard = null;
        function playSound(id, el) {
            const audio = document.getElementById(id);
            if(currentAudio === audio && !audio.paused) { 
                audio.pause(); el.classList.remove('playing'); currentAudio=null; return; 
            }
            if(currentAudio) { 
                currentAudio.pause(); currentCard.classList.remove('playing'); 
            }
            audio.play()
                .then(()=>{ el.classList.add('playing'); currentAudio=audio; currentCard=el; })
                .catch(()=>{ alert("Please ensure MP3 files are in 'assets' folder!"); });
            
            audio.onended = () => { el.classList.remove('playing'); currentAudio = null; };
        }

        // --- 6. Food Lottery Logic ---
        const foodList = [
            { name: "Mianxian Paste", desc: "Silky & Savory" },
            { name: "Ginger Duck", desc: "Aromatic & Warming" },
            { name: "Sandworm Jelly", desc: "Chewy Ocean Taste" },
            { name: "Meat Zongzi", desc: "Savory Sticky Rice" },
            { name: "Four-Fruit Soup", desc: "Summer Refreshment" },
            { name: "Beef Soup", desc: "Thick & Tender" },
            { name: "Manjian Gao", desc: "Pancake Dessert" },
            { name: "Popiah", desc: "Spring Roll Wrap" }
        ];

        function startLottery() {
            const btn = document.getElementById('start-btn');
            const nameDiv = document.querySelector('.food-name');
            const descDiv = document.querySelector('.food-desc');
            
            btn.disabled = true; 
            btn.innerText = "Finding..."; 
            nameDiv.classList.add('blur');
            
            let steps = 0, total = 20, speed = 50;
            
            function run() {
                const r = foodList[Math.floor(Math.random() * foodList.length)];
                nameDiv.innerText = r.name; 
                descDiv.innerText = "...";
                
                if (++steps < total) { 
                    speed += 5; 
                    setTimeout(run, speed); 
                } else {
                    nameDiv.classList.remove('blur'); 
                    nameDiv.innerText = "‚ú® " + r.name + " ‚ú®";
                    descDiv.innerText = r.desc; 
                    btn.disabled = false; 
                    btn.innerText = "Spin Again";
                }
            }
            run();
        }

        // --- New: Entrepreneur Challenge Module Logic ---
        let currentStep = 1;
        const totalSteps = 4;

        function initChallenge() {
            // Add click events to all option buttons
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const isCorrect = this.getAttribute('data-correct') === 'true';
                    const stepContent = this.closest('.step-content');
                    
                    // Disable all options
                    stepContent.querySelectorAll('.option-btn').forEach(opt => {
                        opt.disabled = true;
                        if(opt === this) {
                            opt.classList.add(isCorrect ? 'correct' : 'wrong');
                        } else if(opt.getAttribute('data-correct') === 'true') {
                            opt.classList.add('correct');
                        }
                    });
                    
                    // Show feedback
                    const successFeedback = stepContent.querySelector('.feedback-success');
                    const failFeedback = stepContent.querySelector('.feedback-fail');
                    
                    if(isCorrect) {
                        successFeedback.style.display = 'block';
                    } else {
                        failFeedback.style.display = 'block';
                    }
                    
                    // Show next button
                    document.querySelector('.next-btn').style.display = 'block';
                });
            });
        }

        function nextStep() {
            currentStep++;
            
            // Hide current step, show next step
            document.getElementById(`step-${currentStep-1}`).style.display = 'none';
            
            if(currentStep <= totalSteps) {
                document.getElementById(`step-${currentStep}`).style.display = 'block';
                document.getElementById(`step-${currentStep}`).classList.add('fade-in');
                
                // Update step button status
                document.querySelectorAll('.step-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if(parseInt(btn.getAttribute('data-step')) === currentStep) {
                        btn.classList.add('active');
                    }
                });
                
                // Update progress bar
                const progressPercent = (currentStep / totalSteps) * 100;
                document.querySelector('.progress-fill').style.width = `${progressPercent}%`;
                document.querySelector('.progress-text').textContent = `Progress: ${currentStep}/${totalSteps}`;
                
                // Hide next button
                document.querySelector('.next-btn').style.display = 'none';
                
                // Enable options for new step
                document.querySelectorAll(`#step-${currentStep} .option-btn`).forEach(opt => {
                    opt.disabled = false;
                    opt.classList.remove('correct', 'wrong');
                });
                
                // Hide feedback for new step
                document.querySelectorAll(`#step-${currentStep} .result-feedback`).forEach(feedback => {
                    feedback.style.display = 'none';
                });
            } else {
                // Show final result
                document.querySelector('.challenge-content').querySelectorAll('.step-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.getElementById('final-result').style.display = 'block';
                document.getElementById('final-result').classList.add('fade-in');
                
                // Update progress to 100%
                document.querySelector('.progress-fill').style.width = '100%';
                document.querySelector('.progress-text').textContent = `Progress: Completed`;
                
                // Hide next button
                document.querySelector('.next-btn').style.display = 'none';
            }
        }

        function restartChallenge() {
            currentStep = 1;
            
            // Show first step
            document.querySelectorAll('.step-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('step-1').style.display = 'block';
            document.getElementById('step-1').classList.add('fade-in');
            document.getElementById('final-result').style.display = 'none';
            
            // Reset step button status
            document.querySelectorAll('.step-btn').forEach(btn => {
                btn.classList.remove('active');
                if(parseInt(btn.getAttribute('data-step')) === 1) {
                    btn.classList.add('active');
                }
            });
            
            // Reset progress bar
            document.querySelector('.progress-fill').style.width = '0%';
            document.querySelector('.progress-text').textContent = `Progress: 0/4`;
            
            // Enable options for first step
            document.querySelectorAll('#step-1 .option-btn').forEach(opt => {
                opt.disabled = false;
                opt.classList.remove('correct', 'wrong');
            });
            
            // Hide feedback for first step
            document.querySelectorAll('#step-1 .result-feedback').forEach(feedback => {
                feedback.style.display = 'none';
            });
        }
    </script>
</body>
</html>